<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="icon" sizes="64x64" href="consulta.ico">
    <meta charset="UTF-8">
    <title>Exorcismo Express - Reigen Arataka</title>
    <!-- ICONO DEL CARRITO CON IMAGEN -->
<div style="position:fixed; top:15px; right:15px; z-index:99999; cursor:pointer;" onclick="window.location.href='checkout.html'">
    <img src="carrito.png" width="90" alt="Carrito" 
         style="filter:drop-shadow(0 0 20px lime); 
                animation:brillar 3s infinite, flotar 4s ease-in-out infinite;">
    
    <!-- NÚMERO DE ITEMS (círculo rojo estilo Reigen) -->
    <div style="position:absolute; top:-15px; right:-15px; 
                background:#f00; color:#fff; font-size:28px; font-weight:bold;
                width:50px; height:50px; border-radius:50%; 
                border:6px solid #fff; box-shadow:0 0 30px red;
                display:flex; align-items:center; justify-content:center;
                font-family:'Comic Sans MS',cursive; text-shadow:3px 3px #000;"
         id="contador-carrito">0</div>
</div>

<!-- ANIMACIONES ÉPICAS -->
<style>
@keyframes brillar {
    0%,100% { filter:drop-shadow(0 0 20px lime) brightness(1); }
    50%     { filter:drop-shadow(0 0 40px yellow) brightness(1.4); }
}
@keyframes flotar {
    0%,100% { transform:translateY(0) rotate(0deg); }
    50%     { transform:translateY(-12px) rotate(5deg); }
}
</style>

<!-- CONTADOR EN TIEMPO REAL -->
<script>
setInterval(() => {
    const carrito = JSON.parse(localStorage.getItem('carritoReigen') || '[]');
    const contador = document.getElementById('contador-carrito');
    if (contador) {
        contador.textContent = carrito.length;
        // Efecto de vibración cuando se añade uno nuevo
        if (carrito.length > 0) {
            contador.style.animation = 'none';
            setTimeout(() => contador.style.animation = '', 10);
            contador.style.transform = 'scale(1.3)';
            setTimeout(() => contador.style.transform = 'scale(1)', 200);
        }
    }
}, 300);
</script>
    <script>
// =============== CARRITO UNIVERSAL REIGEN ===============

function añadirAlCarritoDesdeSelect(boton) {
    // Busca el <select> más cercano (puede estar en cualquier página)
    const select = boton.closest('.form')?.querySelector('select') || 
                   boton.closest('div')?.querySelector('select');

    if (!select) {
        alert("Error: no se encontró el paquete");
        return;
    }

    // Obtiene el texto completo del <option> seleccionado
    const opcionSeleccionada = select.options[select.selectedIndex];
    const textoCompleto = opcionSeleccionada.textContent; // ej: "Exorcismo Premium - 29.999 ¥"

    // Extrae solo el precio (todo lo que tenga números y ¥)
    const precioMatch = textoCompleto.match(/[\d.,]+ ?¥/);
    const precio = precioMatch ? precioMatch[0] : "?? ¥";

    // Nombre del servicio (todo menos el precio)
    const servicio = textoCompleto.replace(/[\d.,]+ ?¥/g, '').trim();

    // Añade al carrito
    const carrito = JSON.parse(localStorage.getItem('carritoReigen') || '[]');
    carrito.push({ servicio: servicio || textoCompleto, precio });
    localStorage.setItem('carritoReigen', JSON.stringify(carrito));

    alert(`¡AÑADIDO AL CARRITO!\n\n${servicio}\n${precio}\n\nEl Maestro Reigen ya está calentando su técnica especial...`);
}

// Contador del carrito en tiempo real (opcional pero épico)
setInterval(() => {
    const items = JSON.parse(localStorage.getItem('carritoReigen') || '[]');
    const contadores = document.querySelectorAll('.contador-carrito');
    contadores.forEach(el => el.textContent = items.length);
}, 500);
</script>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        html, body { height:100%; background:#000; overflow-x:hidden; }

        /* FONDO ANIMADO (texto japonés cayendo) */
        #bg {
            position:fixed; top:0; left:0; width:100%; height:100%;
            pointer-events:none; z-index:1; overflow:hidden;
        }
        #bg span {
            position:absolute; color:#999; font-size:36px; font-weight:bold;
            white-space:nowrap; opacity:0.55; animation:caer linear infinite;
            user-select:none;
        }
        @keyframes caer {
            0%   { transform:translateY(-150vh) rotate(var(--r)); }
            100% { transform:translateY(150vh) rotate(var(--r)); }
        }

        .content {
            position:relative; z-index:10; min-height:100vh; padding:40px 20px;
            color:#0f0; font-family:"Comic Sans MS",cursive;
        }
        .container { max-width:900px; margin:0 auto; }

        h1 {font-size:68px;color:#ff0;text-align:center;text-shadow:6px 6px #f00, 0 0 20px red;animation:parpadear 1.5s infinite;margin-bottom:20px;}
        @keyframes parpadear {0%,100%{opacity:1}50%{opacity:0.3}}
        marquee {font-size:40px;color:#ffff00;text-shadow:5px 5px #f00;font-weight:bold;}

        .precios {margin:50px 0;background:#000;border:8px double #0f0;padding:25px;border-radius:15px;}
        table {width:100%;border-collapse:collapse;color:#0f0;font-size:25px;}
        th {background:#006400;color:#00ff00;padding:18px;border:5px solid #00ff00;text-shadow:0 0 15px lime;}
        td {padding:16px;border:4px solid #00ff00;text-align:center;}
        tr:nth-child(odd) {background:#001a00;}
        .destacado {color:#ffff00;font-size:34px;animation:glow 2s infinite;}
        @keyframes glow {0%,100%{text-shadow:0 0 15px yellow}50%{text-shadow:0 0 50px red}}

        .form {background:#00008B;border:12px ridge #00ff00;padding:40px;box-shadow:0 0 70px lime;border-radius:15px;}
        input, textarea, select {
            width:100%;padding:16px;margin:18px 0;
            background:#000;color:#0f0;border:6px inset #0f0;font-size:21px;border-radius:8px;
        }
        button {
            background:#00ff00;color:#000;font-size:36px;font-weight:bold;
            padding:22px 70px;border:8px outset #00ff00;cursor:pointer;
            border-radius:12px;box-shadow:0 0 30px lime;transition:all 0.3s;
        }
        button:hover {transform:scale(1.1);box-shadow:0 0 60px yellow;}
        button:active {border-style:inset;background:#00cc00;}
    </style>
</head>
<script>
function irACheckout(btn) {
    const servicio = btn.getAttribute('data-servicio');
    const precio = btn.getAttribute('data-precio');
    localStorage.setItem('servicioReigen', servicio);
    localStorage.setItem('precioReigen', precio);
    window.location.href = 'checkout.html';
}
</script>
<body>

    <!-- FONDO ANIMADO -->
    <div id="bg"></div>

    <!-- REIGEN GRANDE FIJO EN ESQUINA INFERIOR IZQUIERDA (como en la página principal) -->
    <div style="
        position:fixed;
        bottom:30px;
        left:30px;
        z-index:9999;
        pointer-events:none;
        animation: flotar 6s ease-in-out infinite;
    ">
        <img src="salt.png" 
             width="380" 
             alt="Reigen Arataka - Técnica especial activa">
    </div>

    <!-- Pequeña animación de flotar (opcional pero queda brutal) -->
    <style>
    @keyframes flotar {
        0%,100% { transform:translateY(0) rotate(-2deg); }
        50% { transform:translateY(-20px) rotate(2deg); }
    }
    </style>

    <div class="content">
        <div class="container">
            <h1>EXORCISMO EXPRESS</h1>
            <marquee>EL MAESTRO REIGEN TE SALVA EN 24H O MENOS · 100% EFECTIVO GARANTIZADO</marquee>

            <div class="form">
                <input type="text" id="nombre" placeholder="Nombre completo" required>
                <input type="text" id="direccion" placeholder="Dirección exacta del espíritu">
                <textarea id="problema" rows="5" placeholder="Describe el problema (ruidos, sombras, objetos que se mueven, mala suerte...)" required></textarea>
                
                <select id="servicio">
                    <option>Exorcismo Básico - 9.999 ¥</option>
                    <option>Exorcismo Premium - 29.999 ¥</option>
                    <option>Purificación Total del Hogar - 79.999 ¥</option>
                    <option>Pack Familiar 4x3 - 199.999 ¥</option>
                </select>

                
                    <center>
                    <button onclick="añadirAlCarritoDesdeSelect(this)" 
            style="background:#00ff00;color:#000;font-size:36px;padding:22px 70px;border:8px outset #00ff00;cursor:pointer;box-shadow:0 0 30px lime;">
        CONTRATAR EXORCISMO
            </button>
</center>
            </div>

            <div class="precios">
                <table>
                    <tr><th colspan="2">PLANES OFICIALES <span id="año"></span></th></tr>
                    <tr><td>Exorcismo Básico (sal + gritos)</td><td>9.999 ¥</td></tr>
                    <tr><td>Exorcismo Premium (sal bendita + masaje)</td><td>29.999 ¥</td></tr>
                    <tr><td>Purificación Total del Hogar</td><td>79.999 ¥</td></tr>
                    <tr><td class="destacado">Pack Familiar 4x3</td><td class="destacado">199.999 ¥</td></tr>
                </table>
            </div>

            <marquee direction="right">
                PAGO CONTRA REEMBOLSO · SIN DEVOLUCIONES · RENOVACIÓN DEL SITIO EN <span id="renovacion"></span>
            </marquee>
        </div>
    </div>

    <script>
        // Fondo animado
        const textos = ["霊とか相談所", "霊幻新隆"];
        const bg = document.getElementById('bg');
        for (let i = 0; i < 90; i++) {
            const span = document.createElement('span');
            span.textContent = textos[i % 2];
            span.style.left = Math.random() * 100 + '%';
            span.style.setProperty('--r', (Math.random() * 60 - 30) + 'deg');
            const dur = 30 + Math.random() * 40;
            span.style.animation = `caer ${dur}s linear infinite`;
            span.style.animationDelay = -Math.random() * dur + 's';
            bg.appendChild(span);
        }

        // Año dinámico
        const año = new Date().getFullYear();
        document.getElementById('año').textContent = año;
        document.getElementById('renovacion').textContent = año + 1;

    
    </script>
</body>
</html>